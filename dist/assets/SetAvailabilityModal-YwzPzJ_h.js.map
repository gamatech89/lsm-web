{"version":3,"file":"SetAvailabilityModal-YwzPzJ_h.js","sources":["../../src/features/team/components/SetAvailabilityModal.tsx"],"sourcesContent":["import { Modal, Form, DatePicker, Select, Input, message } from 'antd';\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport { api } from '@/lib/api';\nimport { useTranslation } from 'react-i18next';\n\nexport function SetAvailabilityModal({ open, onClose }: { open: boolean; onClose: () => void }) {\n  const { t } = useTranslation();\n  const [form] = Form.useForm();\n  const queryClient = useQueryClient();\n\n  const { mutate, isPending } = useMutation({\n    mutationFn: (values: any) => api.availability.create({\n      status: values.status,\n      start_date: values.dateRange[0].format('YYYY-MM-DD'),\n      end_date: values.dateRange[1]?.format('YYYY-MM-DD'),\n      note: values.note,\n    }),\n    onSuccess: (response: any) => {\n      message.success(response.data.message);\n      queryClient.invalidateQueries({ queryKey: ['availability'] });\n      queryClient.invalidateQueries({ queryKey: ['dashboard'] }); \n      onClose();\n      form.resetFields();\n    },\n    onError: () => {\n        message.error('Failed to update availability');\n    }\n  });\n\n  return (\n    <Modal\n      title=\"Set Availability / Report Absence\"\n      open={open}\n      onCancel={onClose}\n      onOk={() => form.submit()}\n      confirmLoading={isPending}\n    >\n      <Form form={form} layout=\"vertical\" onFinish={mutate}>\n        <Form.Item name=\"status\" label=\"Status\" rules={[{ required: true }]}>\n          <Select options={[\n            { label: 'Sick Leave', value: 'sick' },\n            { label: 'Vacation', value: 'vacation' },\n            { label: 'Parental Leave', value: 'parental' },\n            { label: 'Other', value: 'other' }\n          ]} />\n        </Form.Item>\n        <Form.Item name=\"dateRange\" label=\"Duration\" rules={[{ required: true }]}>\n          <DatePicker.RangePicker style={{ width: '100%' }} />\n        </Form.Item>\n        <Form.Item name=\"note\" label=\"Reason (Optional)\">\n          <Input.TextArea />\n        </Form.Item>\n      </Form>\n    </Modal>\n  );\n}\n"],"names":["SetAvailabilityModal","open","onClose","t","useTranslation","form","Form","queryClient","useQueryClient","mutate","isPending","useMutation","values","api","_a","response","message","jsx","Modal","Select","DatePicker","Input"],"mappings":"yGAKO,SAASA,EAAqB,CAAE,KAAAC,EAAM,QAAAC,GAAmD,CAC9F,KAAM,CAAE,EAAAC,CAAA,EAAMC,EAAA,EACR,CAACC,CAAI,EAAIC,EAAK,QAAA,EACdC,EAAcC,EAAA,EAEd,CAAE,OAAAC,EAAQ,UAAAC,CAAA,EAAcC,EAAY,CACxC,WAAaC,GAAA,OAAgB,OAAAC,EAAI,aAAa,OAAO,CACnD,OAAQD,EAAO,OACf,WAAYA,EAAO,UAAU,CAAC,EAAE,OAAO,YAAY,EACnD,UAAUE,EAAAF,EAAO,UAAU,CAAC,IAAlB,YAAAE,EAAqB,OAAO,cACtC,KAAMF,EAAO,IAAA,CACd,GACD,UAAYG,GAAkB,CAC5BC,EAAQ,QAAQD,EAAS,KAAK,OAAO,EACrCR,EAAY,kBAAkB,CAAE,SAAU,CAAC,cAAc,EAAG,EAC5DA,EAAY,kBAAkB,CAAE,SAAU,CAAC,WAAW,EAAG,EACzDL,EAAA,EACAG,EAAK,YAAA,CACP,EACA,QAAS,IAAM,CACXW,EAAQ,MAAM,+BAA+B,CACjD,CAAA,CACD,EAED,OACEC,EAAAA,IAACC,EAAA,CACC,MAAM,oCACN,KAAAjB,EACA,SAAUC,EACV,KAAM,IAAMG,EAAK,OAAA,EACjB,eAAgBK,EAEhB,gBAACJ,EAAA,CAAK,KAAAD,EAAY,OAAO,WAAW,SAAUI,EAC5C,SAAA,CAAAQ,EAAAA,IAACX,EAAK,KAAL,CAAU,KAAK,SAAS,MAAM,SAAS,MAAO,CAAC,CAAE,SAAU,GAAM,EAChE,SAAAW,MAACE,GAAO,QAAS,CACf,CAAE,MAAO,aAAc,MAAO,MAAA,EAC9B,CAAE,MAAO,WAAY,MAAO,UAAA,EAC5B,CAAE,MAAO,iBAAkB,MAAO,UAAA,EAClC,CAAE,MAAO,QAAS,MAAO,OAAA,CAAQ,EAChC,CAAA,CACL,EACAF,EAAAA,IAACX,EAAK,KAAL,CAAU,KAAK,YAAY,MAAM,WAAW,MAAO,CAAC,CAAE,SAAU,GAAM,EACrE,SAAAW,EAAAA,IAACG,EAAW,YAAX,CAAuB,MAAO,CAAE,MAAO,OAAO,CAAG,EACpD,EACAH,EAAAA,IAACX,EAAK,KAAL,CAAU,KAAK,OAAO,MAAM,oBAC3B,SAAAW,EAAAA,IAACI,EAAM,SAAN,CAAA,CAAe,CAAA,CAClB,CAAA,CAAA,CACF,CAAA,CAAA,CAGN"}